{"version":3,"sources":["src/components/InsufficientBalanceButton.tsx","src/components/AmountMeta.tsx","src/components/ApproveButton.tsx","src/hooks/useDelayedOnBlockEffect.tsx","src/components/TokenSymbol.tsx","src/constants/index.ts","src/hooks/useSwapRouter.tsx","node_modules/eth-permit/dist/eth-permit.js","node_modules/eth-permit/dist/rpc.js","node_modules/eth-permit/dist/lib.js","node_modules/utf8/utf8.js","src/hooks/useZapper.tsx"],"names":["InsufficientBalanceButton","symbol","t","useTranslation","title","disabled","AmountMeta","props","useColors","textDark","textLight","placeholder","style","fontSize","IS_DESKTOP","marginBottom","Spacing","normal","color","amount","suffix","ApproveButton","approveToken","useContext","EthersContext","useState","loading","setLoading","onPress","useCallback","a","async","token","onError","address","spender","tx","wait","onSuccess","hidden","containerStyle","tiny","useDelayedOnBlockEffect","effect","getEventName","inputs","initialTimeout","addOnBlockListener","removeOnBlockListener","eventName","useAsyncEffect","setTimeout","handles","forEach","handle","clearTimeout","TokenSymbol","medium","caption","marginLeft","TTL","ALLOWED_SLIPPAGE","Percent","FEE","useSwapRouter","swap","trade","signer","Router","getAddress","feeOnTransfer","allowedSlippage","recipient","ttl","params","swapCallParameters","router","getContract","ROUTER","estimateGas","methodName","args","value","gasLimit","functions","mul","div","logTransaction","map","arg","toString","addLiquidity","fromToken","toToken","fromAmount","toAmount","deadline","Math","floor","Date","getTime","deduct","removeLiquidityETH","liquidity","amountETH","removeLiquidity","addLiquidityETH","calculateSwapFee","__awaiter","this","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","apply","Object","defineProperty","exports","signERC2612Permit","signDaiPermit","rpc_1","lib_1","MAX_INT","EIP712Domain","name","type","zeros","numZeros","padEnd","getTokenName","provider","hexToUtf8","call","substr","getDomain","tokenAddress","chainId","all","getChainId","version","verifyingContract","holder","expiry","nonce","message","allowed","typedData","domain","types","Permit","primaryType","createTypedDaiData","sig","signData","assign","owner","createTypedERC2612Data","setChainIdOverride","send","method","payload","id","random","callback","err","error","console","_provider","sendAsync","fromAddress","typeData","typeDataString","JSON","stringify","catch","r","slice","s","v","parseInt","chainIdOverride","to","data","__importDefault","mod","__esModule","utf8_1","hex","str","code","l","replace","split","reverse","join","length","i","String","fromCharCode","default","decode","root","byteArray","byteCount","byteIndex","stringFromCharCode","ucs2decode","string","extra","output","counter","charCodeAt","push","checkScalarValue","codePoint","Error","toUpperCase","createByte","shift","encodeCodePoint","readContinuationByte","continuationByte","decodeSymbol","byte1","encode","codePoints","index","byteString","tmp","array","ucs2encode","useZapper","ethereum","useSDK","getPair","getTrade","calculateAmountOfLPTokenMinted","zapSlippage","populateSwapData","ZAP_IN","populateTransaction","zapIn","pair","TokenAmount","convertToken","getOutputAmount","lpTokenAmount","contract","liquidityToken","isETH","ethers","constants","Zero","ZapIn","getZapOutSwappedAmount","outputToken","lpToken","tokenA","tokenB","fromReserve","parseCurrencyAmount","reserveOf","decimals","totalSupply","outputAmount","zapOut","ZAP_OUT","permit","ZapOutWithPermit"],"mappings":"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","file":"static/js/1.96c50d42.chunk.js","sourcesContent":["import React from \"react\";\n\nimport useTranslation from \"../hooks/useTranslation\";\nimport Button from \"./Button\";\n\nconst InsufficientBalanceButton = ({ symbol }: { symbol: string }) => {\n    const t = useTranslation();\n    return <Button title={symbol ? t(\"insufficient-\", { symbol }) : t(\"insufficient-balance\")} disabled={true} />;\n};\nexport default InsufficientBalanceButton;\n","import React, { FC } from \"react\";\n\nimport { IS_DESKTOP, Spacing } from \"../constants/dimension\";\nimport useColors from \"../hooks/useColors\";\nimport useTranslation from \"../hooks/useTranslation\";\nimport Text from \"./Text\";\n\nexport interface AmountMetaProps {\n    amount?: string;\n    suffix?: string;\n    disabled?: boolean;\n}\n\nconst AmountMeta: FC<AmountMetaProps> = props => {\n    const t = useTranslation();\n    const { textDark, textLight, placeholder } = useColors();\n    return (\n        <Text\n            style={{\n                fontSize: IS_DESKTOP ? 28 : 20,\n                marginBottom: Spacing.normal,\n                color: props.disabled ? placeholder : props.amount ? textDark : textLight\n            }}>\n            {props.disabled ? t(\"n/a\") : props.amount ? props.amount + \" \" + (props.suffix || \"\") : t(\"fetching\")}\n        </Text>\n    );\n};\n\nexport default AmountMeta;\n","import React, { FC, useCallback, useContext, useState } from \"react\";\nimport { View } from \"react-native\";\n\nimport { Spacing } from \"../constants/dimension\";\nimport { EthersContext } from \"../context/EthersContext\";\nimport useTranslation from \"../hooks/useTranslation\";\nimport Token from \"../types/Token\";\nimport Button from \"./Button\";\n\nexport interface ApproveButtonProps {\n    token: Token;\n    spender: string;\n    onSuccess: () => void;\n    onError: (e) => void;\n    hidden?: boolean;\n}\n\nconst ApproveButton: FC<ApproveButtonProps> = props => {\n    const t = useTranslation();\n    const { approveToken } = useContext(EthersContext);\n    const [loading, setLoading] = useState(false);\n    const onPress = useCallback(async () => {\n        if (props.token) {\n            props.onError({});\n            setLoading(true);\n            try {\n                const tx = await approveToken(props.token.address, props.spender);\n                if (tx) {\n                    await tx.wait();\n                    props.onSuccess();\n                }\n            } catch (e) {\n                props.onError(e);\n            } finally {\n                setLoading(false);\n            }\n        }\n    }, [props.token]);\n    if (props.hidden) return <View />;\n    return (\n        <Button\n            title={t(\"approve-\", { symbol: props.token?.symbol || \"\" })}\n            onPress={onPress}\n            loading={loading}\n            containerStyle={{ marginBottom: Spacing.tiny }}\n        />\n    );\n};\n\nexport default ApproveButton;\n","import { useContext } from \"react\";\n\nimport useAsyncEffect from \"use-async-effect\";\nimport { EthersContext, OnBlockListener } from \"../context/EthersContext\";\n\nconst useDelayedOnBlockEffect = (\n    effect: OnBlockListener,\n    getEventName: () => string,\n    inputs?: any[],\n    initialTimeout = 500\n) => {\n    const { addOnBlockListener, removeOnBlockListener } = useContext(EthersContext);\n    const eventName = getEventName();\n    useAsyncEffect<number[]>(\n        () => {\n            return [\n                setTimeout(effect, initialTimeout),\n                setTimeout(() => addOnBlockListener(eventName, effect), initialTimeout)\n            ];\n        },\n        handles => {\n            if (handles) {\n                handles.forEach(handle => clearTimeout(handle));\n                removeOnBlockListener(eventName);\n            }\n        },\n        inputs\n    );\n};\n\nexport default useDelayedOnBlockEffect;\n","import React from \"react\";\n\nimport { Spacing } from \"../constants/dimension\";\nimport Token from \"../types/Token\";\nimport Text from \"./Text\";\n\nconst TokenSymbol = (props: { token: Token; disabled?: boolean }) => (\n    <Text medium={true} caption={true} disabled={props.disabled} style={{ marginLeft: Spacing.tiny }}>\n        {props.token.symbol}\n    </Text>\n);\n\nexport default TokenSymbol;\n","import { Percent } from \"@sushiswap/sdk\";\n\nexport const TTL = 60 * 20;\nexport const ALLOWED_SLIPPAGE = new Percent(\"50\", \"10000\"); // 0.05%\nexport const FEE = new Percent(\"3\", \"1000\"); // 0.3%\n","import { useCallback } from \"react\";\n\nimport { Router, Trade } from \"@sushiswap/sdk\";\nimport { ethers } from \"ethers\";\nimport { ALLOWED_SLIPPAGE, TTL } from \"../constants\";\nimport { ROUTER } from \"../constants/contracts\";\nimport Token from \"../types/Token\";\nimport { deduct, getContract } from \"../utils\";\nimport { logTransaction } from \"../utils/analytics-utils\";\n\n// tslint:disable-next-line:max-func-body-length\nconst useSwapRouter = () => {\n    const swap = useCallback(async (trade: Trade, signer: ethers.Signer) => {\n        if (trade) {\n            const params = Router.swapCallParameters(trade, {\n                feeOnTransfer: false,\n                allowedSlippage: ALLOWED_SLIPPAGE,\n                recipient: await signer.getAddress(),\n                ttl: TTL\n            });\n            const router = getContract(\"IUniswapV2Router02\", ROUTER, signer);\n            const gasLimit = await router.estimateGas[params.methodName](...params.args, {\n                value: params.value\n            });\n            const tx = await router.functions[params.methodName](...params.args, {\n                value: params.value,\n                gasLimit: gasLimit.mul(120).div(100)\n            });\n            await logTransaction(\n                tx,\n                \"UniswapV2Router02.\" + params.methodName + \"()\",\n                ...params.args.map(arg => arg.toString())\n            );\n            return {\n                trade,\n                tx\n            };\n        }\n    }, []);\n\n    const addLiquidity = useCallback(\n        async (\n            fromToken: Token,\n            toToken: Token,\n            fromAmount: ethers.BigNumber,\n            toAmount: ethers.BigNumber,\n            signer: ethers.Signer\n        ) => {\n            const router = getContract(\"IUniswapV2Router02\", ROUTER, signer);\n            const deadline = `0x${(Math.floor(new Date().getTime() / 1000) + TTL).toString(16)}`;\n            const args = [\n                fromToken.address,\n                toToken.address,\n                fromAmount,\n                toAmount,\n                deduct(fromAmount, ALLOWED_SLIPPAGE),\n                deduct(toAmount, ALLOWED_SLIPPAGE),\n                await signer.getAddress(),\n                deadline\n            ];\n            const gasLimit = await router.estimateGas.addLiquidity(...args);\n            const tx = await router.functions.addLiquidity(...args, {\n                gasLimit: gasLimit.mul(120).div(100)\n            });\n            return logTransaction(tx, \"UniswapV2Router02.addLiquidity()\", ...args.map(arg => arg.toString()));\n        },\n        []\n    );\n\n    const removeLiquidityETH = useCallback(\n        async (\n            token: Token,\n            liquidity: ethers.BigNumber,\n            amount: ethers.BigNumber,\n            amountETH: ethers.BigNumber,\n            signer: ethers.Signer\n        ) => {\n            const router = getContract(\"IUniswapV2Router02\", ROUTER, signer);\n            const deadline = `0x${(Math.floor(new Date().getTime() / 1000) + TTL).toString(16)}`;\n            const args = [\n                token.address,\n                liquidity,\n                deduct(amount, ALLOWED_SLIPPAGE),\n                deduct(amountETH, ALLOWED_SLIPPAGE),\n                await signer.getAddress(),\n                deadline\n            ];\n            const gasLimit = await router.estimateGas.removeLiquidityETH(...args);\n            const tx = await router.functions.removeLiquidityETH(...args, {\n                gasLimit: gasLimit.mul(120).div(100)\n            });\n            return logTransaction(tx, \"UniswapV2Router02.removeLiquidityETH()\", ...args.map(arg => arg.toString()));\n        },\n        []\n    );\n\n    const removeLiquidity = useCallback(\n        async (\n            fromToken: Token,\n            toToken: Token,\n            liquidity: ethers.BigNumber,\n            fromAmount: ethers.BigNumber,\n            toAmount: ethers.BigNumber,\n            signer: ethers.Signer\n        ) => {\n            const router = getContract(\"IUniswapV2Router02\", ROUTER, signer);\n            const deadline = `0x${(Math.floor(new Date().getTime() / 1000) + TTL).toString(16)}`;\n            const args = [\n                fromToken.address,\n                toToken.address,\n                liquidity,\n                deduct(fromAmount, ALLOWED_SLIPPAGE),\n                deduct(toAmount, ALLOWED_SLIPPAGE),\n                await signer.getAddress(),\n                deadline\n            ];\n            const gasLimit = await router.estimateGas.removeLiquidity(...args);\n            const tx = await router.functions.removeLiquidity(...args, {\n                gasLimit: gasLimit.mul(120).div(100)\n            });\n            return logTransaction(tx, \"UniswapV2Router02.removeLiquidity()\", ...args.map(arg => arg.toString()));\n        },\n        []\n    );\n\n    const addLiquidityETH = useCallback(\n        async (token: Token, amount: ethers.BigNumber, amountETH: ethers.BigNumber, signer: ethers.Signer) => {\n            const router = getContract(\"IUniswapV2Router02\", ROUTER, signer);\n            const deadline = `0x${(Math.floor(new Date().getTime() / 1000) + TTL).toString(16)}`;\n            const args = [\n                token.address,\n                amount,\n                deduct(amount, ALLOWED_SLIPPAGE),\n                deduct(amountETH, ALLOWED_SLIPPAGE),\n                await signer.getAddress(),\n                deadline\n            ];\n            const gasLimit = await router.estimateGas.addLiquidityETH(...args, {\n                value: amountETH\n            });\n            const tx = await router.functions.addLiquidityETH(...args, {\n                gasLimit: gasLimit.mul(120).div(100),\n                value: amountETH\n            });\n            return logTransaction(tx, \"UniswapV2Router02.addLiquidityETH()\", ...args.map(arg => arg.toString()));\n        },\n        []\n    );\n\n    const calculateSwapFee = (fromAmount: ethers.BigNumber) => {\n        return fromAmount.mul(3).div(1000);\n    };\n\n    return {\n        swap,\n        addLiquidity,\n        addLiquidityETH,\n        removeLiquidity,\n        removeLiquidityETH,\n        calculateSwapFee\n    };\n};\n\nexport default useSwapRouter;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.signERC2612Permit = exports.signDaiPermit = void 0;\nconst rpc_1 = require(\"./rpc\");\nconst lib_1 = require(\"./lib\");\nconst MAX_INT = '0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff';\nconst EIP712Domain = [\n    { name: \"name\", type: \"string\" },\n    { name: \"version\", type: \"string\" },\n    { name: \"chainId\", type: \"uint256\" },\n    { name: \"verifyingContract\", type: \"address\" },\n];\nconst createTypedDaiData = (message, domain) => {\n    const typedData = {\n        types: {\n            EIP712Domain,\n            Permit: [\n                { name: \"holder\", type: \"address\" },\n                { name: \"spender\", type: \"address\" },\n                { name: \"nonce\", type: \"uint256\" },\n                { name: \"expiry\", type: \"uint256\" },\n                { name: \"allowed\", type: \"bool\" },\n            ],\n        },\n        primaryType: \"Permit\",\n        domain,\n        message,\n    };\n    return typedData;\n};\nconst createTypedERC2612Data = (message, domain) => {\n    const typedData = {\n        types: {\n            EIP712Domain,\n            Permit: [\n                { name: \"owner\", type: \"address\" },\n                { name: \"spender\", type: \"address\" },\n                { name: \"value\", type: \"uint256\" },\n                { name: \"nonce\", type: \"uint256\" },\n                { name: \"deadline\", type: \"uint256\" },\n            ],\n        },\n        primaryType: \"Permit\",\n        domain,\n        message,\n    };\n    return typedData;\n};\nconst NONCES_FN = '0x7ecebe00';\nconst NAME_FN = '0x06fdde03';\nconst zeros = (numZeros) => ''.padEnd(numZeros, '0');\nconst getTokenName = (provider, address) => __awaiter(void 0, void 0, void 0, function* () { return lib_1.hexToUtf8((yield rpc_1.call(provider, address, NAME_FN)).substr(130)); });\nconst getDomain = (provider, token) => __awaiter(void 0, void 0, void 0, function* () {\n    if (typeof token !== 'string') {\n        return token;\n    }\n    const tokenAddress = token;\n    const [name, chainId] = yield Promise.all([\n        getTokenName(provider, tokenAddress),\n        rpc_1.getChainId(provider),\n    ]);\n    const domain = { name, version: '1', chainId, verifyingContract: tokenAddress };\n    return domain;\n});\nexports.signDaiPermit = (provider, token, holder, spender, expiry, nonce) => __awaiter(void 0, void 0, void 0, function* () {\n    const tokenAddress = token.verifyingContract || token;\n    const message = {\n        holder,\n        spender,\n        nonce: nonce || (yield rpc_1.call(provider, tokenAddress, `${NONCES_FN}${zeros(24)}${holder.substr(2)}`)),\n        expiry: expiry || MAX_INT,\n        allowed: true,\n    };\n    const domain = yield getDomain(provider, token);\n    const typedData = createTypedDaiData(message, domain);\n    const sig = yield rpc_1.signData(provider, holder, typedData);\n    return Object.assign(Object.assign({}, sig), message);\n});\nexports.signERC2612Permit = (provider, token, owner, spender, value = MAX_INT, deadline, nonce) => __awaiter(void 0, void 0, void 0, function* () {\n    const tokenAddress = token.verifyingContract || token;\n    const message = {\n        owner,\n        spender,\n        value,\n        nonce: nonce || (yield rpc_1.call(provider, tokenAddress, `${NONCES_FN}${zeros(24)}${owner.substr(2)}`)),\n        deadline: deadline || MAX_INT,\n    };\n    const domain = yield getDomain(provider, token);\n    const typedData = createTypedERC2612Data(message, domain);\n    const sig = yield rpc_1.signData(provider, owner, typedData);\n    return Object.assign(Object.assign({}, sig), message);\n});\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.call = exports.getChainId = exports.setChainIdOverride = exports.signData = exports.send = void 0;\nconst randomId = () => Math.floor(Math.random() * 10000000000);\nexports.send = (provider, method, params) => new Promise((resolve, reject) => {\n    const payload = {\n        id: randomId(),\n        method,\n        params,\n    };\n    const callback = (err, result) => {\n        if (err) {\n            reject(err);\n        }\n        else if (result.error) {\n            console.error(result.error);\n            reject(result.error);\n        }\n        else {\n            resolve(result.result);\n        }\n    };\n    let _provider = provider.provider || provider;\n    if (_provider.sendAsync) {\n        _provider.sendAsync(payload, callback);\n    }\n    else {\n        _provider.send(payload, callback);\n    }\n});\nexports.signData = (provider, fromAddress, typeData) => __awaiter(void 0, void 0, void 0, function* () {\n    const typeDataString = typeof typeData === 'string' ? typeData : JSON.stringify(typeData);\n    const result = yield exports.send(provider, 'eth_signTypedData_v4', [fromAddress, typeDataString])\n        .catch((error) => {\n        if (error.message === 'Method eth_signTypedData_v4 not supported.') {\n            return exports.send(provider, 'eth_signTypedData', [fromAddress, typeData]);\n        }\n        else {\n            throw error;\n        }\n    });\n    return {\n        r: result.slice(0, 66),\n        s: '0x' + result.slice(66, 130),\n        v: parseInt(result.slice(130, 132), 16),\n    };\n});\nlet chainIdOverride = null;\nexports.setChainIdOverride = (id) => { chainIdOverride = id; };\nexports.getChainId = (provider) => __awaiter(void 0, void 0, void 0, function* () { return chainIdOverride || exports.send(provider, 'eth_chainId'); });\nexports.call = (provider, to, data) => exports.send(provider, 'eth_call', [{\n        to,\n        data,\n    }, 'latest']);\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.hexToUtf8 = void 0;\nconst utf8_1 = __importDefault(require(\"utf8\"));\nexports.hexToUtf8 = function (hex) {\n    // if (!isHexStrict(hex))\n    //     throw new Error('The parameter \"'+ hex +'\" must be a valid HEX string.');\n    let str = \"\";\n    let code = 0;\n    hex = hex.replace(/^0x/i, '');\n    // remove 00 padding from either side\n    hex = hex.replace(/^(?:00)*/, '');\n    hex = hex.split(\"\").reverse().join(\"\");\n    hex = hex.replace(/^(?:00)*/, '');\n    hex = hex.split(\"\").reverse().join(\"\");\n    let l = hex.length;\n    for (let i = 0; i < l; i += 2) {\n        code = parseInt(hex.substr(i, 2), 16);\n        // if (code !== 0) {\n        str += String.fromCharCode(code);\n        // }\n    }\n    return utf8_1.default.decode(str);\n};\n","/*! https://mths.be/utf8js v3.0.0 by @mathias */\n;(function(root) {\n\n\tvar stringFromCharCode = String.fromCharCode;\n\n\t// Taken from https://mths.be/punycode\n\tfunction ucs2decode(string) {\n\t\tvar output = [];\n\t\tvar counter = 0;\n\t\tvar length = string.length;\n\t\tvar value;\n\t\tvar extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t// Taken from https://mths.be/punycode\n\tfunction ucs2encode(array) {\n\t\tvar length = array.length;\n\t\tvar index = -1;\n\t\tvar value;\n\t\tvar output = '';\n\t\twhile (++index < length) {\n\t\t\tvalue = array[index];\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t}\n\t\treturn output;\n\t}\n\n\tfunction checkScalarValue(codePoint) {\n\t\tif (codePoint >= 0xD800 && codePoint <= 0xDFFF) {\n\t\t\tthrow Error(\n\t\t\t\t'Lone surrogate U+' + codePoint.toString(16).toUpperCase() +\n\t\t\t\t' is not a scalar value'\n\t\t\t);\n\t\t}\n\t}\n\t/*--------------------------------------------------------------------------*/\n\n\tfunction createByte(codePoint, shift) {\n\t\treturn stringFromCharCode(((codePoint >> shift) & 0x3F) | 0x80);\n\t}\n\n\tfunction encodeCodePoint(codePoint) {\n\t\tif ((codePoint & 0xFFFFFF80) == 0) { // 1-byte sequence\n\t\t\treturn stringFromCharCode(codePoint);\n\t\t}\n\t\tvar symbol = '';\n\t\tif ((codePoint & 0xFFFFF800) == 0) { // 2-byte sequence\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 6) & 0x1F) | 0xC0);\n\t\t}\n\t\telse if ((codePoint & 0xFFFF0000) == 0) { // 3-byte sequence\n\t\t\tcheckScalarValue(codePoint);\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 12) & 0x0F) | 0xE0);\n\t\t\tsymbol += createByte(codePoint, 6);\n\t\t}\n\t\telse if ((codePoint & 0xFFE00000) == 0) { // 4-byte sequence\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 18) & 0x07) | 0xF0);\n\t\t\tsymbol += createByte(codePoint, 12);\n\t\t\tsymbol += createByte(codePoint, 6);\n\t\t}\n\t\tsymbol += stringFromCharCode((codePoint & 0x3F) | 0x80);\n\t\treturn symbol;\n\t}\n\n\tfunction utf8encode(string) {\n\t\tvar codePoints = ucs2decode(string);\n\t\tvar length = codePoints.length;\n\t\tvar index = -1;\n\t\tvar codePoint;\n\t\tvar byteString = '';\n\t\twhile (++index < length) {\n\t\t\tcodePoint = codePoints[index];\n\t\t\tbyteString += encodeCodePoint(codePoint);\n\t\t}\n\t\treturn byteString;\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tfunction readContinuationByte() {\n\t\tif (byteIndex >= byteCount) {\n\t\t\tthrow Error('Invalid byte index');\n\t\t}\n\n\t\tvar continuationByte = byteArray[byteIndex] & 0xFF;\n\t\tbyteIndex++;\n\n\t\tif ((continuationByte & 0xC0) == 0x80) {\n\t\t\treturn continuationByte & 0x3F;\n\t\t}\n\n\t\t// If we end up here, it’s not a continuation byte\n\t\tthrow Error('Invalid continuation byte');\n\t}\n\n\tfunction decodeSymbol() {\n\t\tvar byte1;\n\t\tvar byte2;\n\t\tvar byte3;\n\t\tvar byte4;\n\t\tvar codePoint;\n\n\t\tif (byteIndex > byteCount) {\n\t\t\tthrow Error('Invalid byte index');\n\t\t}\n\n\t\tif (byteIndex == byteCount) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Read first byte\n\t\tbyte1 = byteArray[byteIndex] & 0xFF;\n\t\tbyteIndex++;\n\n\t\t// 1-byte sequence (no continuation bytes)\n\t\tif ((byte1 & 0x80) == 0) {\n\t\t\treturn byte1;\n\t\t}\n\n\t\t// 2-byte sequence\n\t\tif ((byte1 & 0xE0) == 0xC0) {\n\t\t\tbyte2 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x1F) << 6) | byte2;\n\t\t\tif (codePoint >= 0x80) {\n\t\t\t\treturn codePoint;\n\t\t\t} else {\n\t\t\t\tthrow Error('Invalid continuation byte');\n\t\t\t}\n\t\t}\n\n\t\t// 3-byte sequence (may include unpaired surrogates)\n\t\tif ((byte1 & 0xF0) == 0xE0) {\n\t\t\tbyte2 = readContinuationByte();\n\t\t\tbyte3 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x0F) << 12) | (byte2 << 6) | byte3;\n\t\t\tif (codePoint >= 0x0800) {\n\t\t\t\tcheckScalarValue(codePoint);\n\t\t\t\treturn codePoint;\n\t\t\t} else {\n\t\t\t\tthrow Error('Invalid continuation byte');\n\t\t\t}\n\t\t}\n\n\t\t// 4-byte sequence\n\t\tif ((byte1 & 0xF8) == 0xF0) {\n\t\t\tbyte2 = readContinuationByte();\n\t\t\tbyte3 = readContinuationByte();\n\t\t\tbyte4 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x07) << 0x12) | (byte2 << 0x0C) |\n\t\t\t\t(byte3 << 0x06) | byte4;\n\t\t\tif (codePoint >= 0x010000 && codePoint <= 0x10FFFF) {\n\t\t\t\treturn codePoint;\n\t\t\t}\n\t\t}\n\n\t\tthrow Error('Invalid UTF-8 detected');\n\t}\n\n\tvar byteArray;\n\tvar byteCount;\n\tvar byteIndex;\n\tfunction utf8decode(byteString) {\n\t\tbyteArray = ucs2decode(byteString);\n\t\tbyteCount = byteArray.length;\n\t\tbyteIndex = 0;\n\t\tvar codePoints = [];\n\t\tvar tmp;\n\t\twhile ((tmp = decodeSymbol()) !== false) {\n\t\t\tcodePoints.push(tmp);\n\t\t}\n\t\treturn ucs2encode(codePoints);\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\troot.version = '3.0.0';\n\troot.encode = utf8encode;\n\troot.decode = utf8decode;\n\n}(typeof exports === 'undefined' ? this.utf8 = {} : exports));\n","import { useCallback, useContext } from \"react\";\n\nimport { Percent, Router, TokenAmount } from \"@sushiswap/sdk\";\nimport { signERC2612Permit } from \"eth-permit\";\nimport { ethers } from \"ethers\";\nimport { ALLOWED_SLIPPAGE, TTL } from \"../constants\";\nimport { ROUTER, ZAP_IN, ZAP_OUT } from \"../constants/contracts\";\nimport { EthersContext } from \"../context/EthersContext\";\nimport LPToken from \"../types/LPToken\";\nimport Token from \"../types/Token\";\nimport { convertToken, deduct, getContract, isETH, parseCurrencyAmount } from \"../utils\";\nimport { logTransaction } from \"../utils/analytics-utils\";\nimport useSDK from \"./useSDK\";\n\n// tslint:disable-next-line:max-func-body-length\nconst useZapper = () => {\n    const { ethereum } = useContext(EthersContext);\n    const { getPair, getTrade, calculateAmountOfLPTokenMinted } = useSDK();\n    const zapSlippage = new Percent(\"3\", \"100\"); // 3.0%\n\n    const populateSwapData = async (\n        fromToken: Token,\n        toToken: Token,\n        amount: ethers.BigNumber,\n        provider: ethers.providers.BaseProvider,\n        signer: ethers.Signer\n    ) => {\n        const trade = await getTrade(fromToken, toToken, amount, provider);\n        if (!trade) throw new Error(\"Cannot find trade\");\n        const params = Router.swapCallParameters(trade, {\n            feeOnTransfer: false,\n            allowedSlippage: ALLOWED_SLIPPAGE,\n            recipient: ZAP_IN,\n            ttl: TTL\n        });\n        const router = getContract(\"IUniswapV2Router02\", ROUTER, signer);\n        const tx = await router.populateTransaction[params.methodName](...params.args, { value: params.value });\n        return tx.data || \"\";\n    };\n\n    const zapIn = useCallback(\n        async (\n            fromToken: Token,\n            toToken: Token,\n            fromAmount: ethers.BigNumber,\n            provider: ethers.providers.BaseProvider,\n            signer: ethers.Signer\n        ) => {\n            const pair = await getPair(fromToken, toToken, provider);\n            const amount = new TokenAmount(convertToken(fromToken), fromAmount.div(2).toString());\n            const lpTokenAmount = await calculateAmountOfLPTokenMinted(pair, amount, pair.getOutputAmount(amount)[0]);\n            if (!lpTokenAmount) throw new Error(\"Cannot calculate LP token amount\");\n            const contract = getContract(\"ZapIn\", ZAP_IN, signer);\n            const args = [\n                fromToken.address,\n                pair.liquidityToken.address,\n                fromAmount,\n                deduct(lpTokenAmount, zapSlippage),\n                ROUTER,\n                ROUTER,\n                await populateSwapData(fromToken, toToken, fromAmount.div(2), provider, signer)\n            ];\n            const value = isETH(fromToken) ? fromAmount : ethers.constants.Zero;\n            const gasLimit = await contract.estimateGas.ZapIn(...args, { value });\n            const tx = await contract.ZapIn(...args, {\n                value,\n                gasLimit: gasLimit.mul(120).div(100)\n            });\n            return logTransaction(tx, \"ZapIn_General_V2.ZapIn()\", ...args.map(arg => arg.toString()));\n        },\n        [populateSwapData]\n    );\n\n    const getZapOutSwappedAmount = async (\n        outputToken: Token,\n        lpToken: LPToken,\n        lpTokenAmount: ethers.BigNumber,\n        provider: ethers.providers.BaseProvider\n    ) => {\n        let fromToken: Token;\n        let toToken: Token;\n        if (outputToken === lpToken.tokenA) {\n            fromToken = lpToken.tokenB;\n            toToken = lpToken.tokenA;\n        } else if (outputToken === lpToken.tokenB) {\n            fromToken = lpToken.tokenA;\n            toToken = lpToken.tokenB;\n        } else {\n            throw new Error(\"Wrong outputToken\");\n        }\n        const pair = await getPair(fromToken, toToken, provider);\n        const fromReserve = parseCurrencyAmount(pair.reserveOf(convertToken(fromToken)), fromToken.decimals);\n        const fromAmount = lpTokenAmount.mul(fromReserve).div(lpToken.totalSupply);\n        const trade = await getTrade(fromToken, toToken, fromAmount, provider);\n        if (!trade) throw new Error(\"Cannot find trade\");\n        return parseCurrencyAmount(trade.outputAmount);\n    };\n\n    const zapOut = useCallback(\n        // tslint:disable-next-line:max-func-body-length\n        async (\n            lpToken: LPToken,\n            outputToken: Token,\n            amount: ethers.BigNumber,\n            provider: ethers.providers.BaseProvider,\n            signer: ethers.Signer\n        ) => {\n            const contract = getContract(\"ZapOut\", ZAP_OUT, signer);\n            const deadline = Math.floor(new Date().getTime() / 1000) + TTL;\n            const permit = await signERC2612Permit(\n                ethereum,\n                lpToken.address,\n                await signer.getAddress(),\n                ZAP_OUT,\n                amount.toString(),\n                deadline\n            );\n            const args = [\n                outputToken.address,\n                lpToken.address,\n                amount,\n                deduct(await getZapOutSwappedAmount(outputToken, lpToken, amount, provider), zapSlippage),\n                amount,\n                deadline,\n                permit.v,\n                permit.r,\n                permit.s\n            ];\n            const gasLimit = await contract.estimateGas.ZapOutWithPermit(...args);\n            const tx = await contract.ZapOutWithPermit(...args, {\n                gasLimit: gasLimit.mul(120).div(100)\n            });\n            return logTransaction(tx, \"ZapOut_General_V1.ZapOutWithPermit()\", ...args.map(arg => arg.toString()));\n        },\n        [getZapOutSwappedAmount]\n    );\n\n    return {\n        zapIn,\n        zapOut,\n        getZapOutSwappedAmount\n    };\n};\n\nexport default useZapper;\n"],"sourceRoot":""}